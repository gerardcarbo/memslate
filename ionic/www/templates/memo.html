<ion-view view-title='Memslate > Memo'>
  <ion-nav-title>
    <img src="img/icon.svg" class="logo">Memo
  </ion-nav-title>
  <ion-content>
    <ion-refresher
      pulling-text="Pull to refresh..."
      on-refresh="memoCtrl.doRefresh()">
    </ion-refresher>
    <div class="item center-text assertive-bg light"
         style="padding: 5px;display:flex;flex-flow: row;align-items: center;justify-content: center;"
         ng-show="memoCtrl.isFiltered()">
      <div>
        <div>Filter Active:&nbsp;</div>
        <div class="smaller-font">
          <span ng-if="memoCtrl.filterSettings.filterByString">'{{memoCtrl.filterSettings.filterString}}'</span>&nbsp;
          <span ng-if="memoCtrl.filterSettings.filterByDates">{{memoCtrl.filterSettings.filterDateFrom | date: 'dd MMM yyyy'}} > {{memoCtrl.filterSettings.filterDateTo | date: 'dd MMM yyyy'}}</span>&nbsp;
          <span ng-if="memoCtrl.filterSettings.filterByLanguages">{{memoCtrl.filterSettings.filterFromLanguage}} <i class="icon ion-arrow-right-b smaller-font"></i> {{memoCtrl.filterSettings.filterToLanguage}}</span>&nbsp;
        </div>
      </div>
      <div class="padding-10">
        <button class="button button-energized" ng-click="memoCtrl.unfilter()">
          <span class=strikethrough><span class="ion-funnel"></span></span>&nbsp;Unfilter
        </button>
      </div>
    </div>
    <div class="item center-text assertive-bg light smaller-font"
         style="padding: 5px;display:flex;flex-flow: row;align-items: center;justify-content: center;"
         ng-show="!memoCtrl.isAuthenticated()">
      <div>
        Anonymous Translations
        <div class="smaller-font">
          will be deleted every day...
        </div>
      </div>
      <div class="padding-10">
        <button id="registerButton" class="button button-positive" ng-click="openRegister()">
          Register
        </button>
      </div>
    </div>
    <ion-list id="memoList">
      <div ng-repeat="(i, translation) in memoCtrl.translations track by $index"
           id="memo_translation_div_{{translation.id}}">
        <div class="item item-stable"
             ng-click="memoCtrl.toggleTranslation(i, translation)"
             ng-class="{active: memoCtrl.isTranslationShown(translation)}">
          <div class="row no-padding">
            <i class="icon no-padding positive"
               ng-class="memoCtrl.isTranslationShown(translation) ? 'ion-chevron-up' : 'ion-chevron-down'">&nbsp&nbsp</i>

            <div class="col col-50 no-padding no-overflow">{{translation.translate}} > {{translation.mainResult}}</div>
            <div class="col col-20 no-padding margin-left-1 smaller-font">
              <span style="padding-right: 3px;">{{translation.fromLang}}</span>
              <i class="icon ion-arrow-right-b smaller-font"></i>
              <span style="padding-left: 5px;">{{translation.toLang}}</span></div>
            <div class="col col-20 no-padding smaller-font right-text">{{translation.insertTime|date}}</div>
          </div>
        </div>
        <div class="item  item-accordion" ng-show="memoCtrl.isTranslationShown(translation)">
          <ms-translation id="translation_{{::translation.id}}" translation="translation"></ms-translation>
        </div>
      </div>
      <ion-infinite-scroll distance="10%" ng-if="memoCtrl.moreDataCanBeLoaded()"
                           on-infinite="memoCtrl.addItems()"></ion-infinite-scroll>
    </ion-list>
  </ion-content>
</ion-view>
